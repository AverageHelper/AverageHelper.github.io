# On PR toward `main`: run builds, run tests, and deploy

when:
  - event: manual
  - event: pull_request
    branch: main

steps:
  build:
    name: Automatic Build
    group: build
    image: ubuntu:noble
    commands:
      - apt-get update -y
      - apt-get install -y sudo curl
      - curl -s -L https://github.com/getzola/zola/releases/download/v0.17.2/zola-v0.17.2-x86_64-unknown-linux-gnu.tar.gz | sudo tar xvzf - -C /usr/local/bin
      - zola check --drafts
